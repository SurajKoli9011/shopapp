{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Orders=_ref=>{let{userId}=_ref;const[orders,setOrders]=useState([]);const[loading,setLoading]=useState(true);const[reviewInputVisible,setReviewInputVisible]=useState(false);const[reviewOrderId,setReviewOrderId]=useState(null);const[reviewContent,setReviewContent]=useState('');const[reviewProductId,setReviewProductId]=useState(null);useEffect(()=>{const fetchOrders=async()=>{try{const response=await axios.get(`http://localhost:8082/orders/getByUserId/${userId}`);setOrders(response.data);}catch(error){console.error('Error fetching orders:',error);}finally{setLoading(false);}};fetchOrders();},[userId]);const handleAddReview=(orderId,productId)=>{setReviewInputVisible(true);setReviewOrderId(orderId);setReviewProductId(productId);};const handleSaveReview=async()=>{try{const payload={content:reviewContent};console.log(\"pid= \",reviewProductId);const response=await axios.post(`http://localhost:8083/reviews/add/${userId}/${reviewOrderId}/${reviewProductId}`,payload);console.log('Review saved successfully:',response.data);setReviewInputVisible(false);setReviewContent('');}catch(error){console.error('Error saving review:',error);}};if(loading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold mb-4\",children:\"Order Details\"}),orders.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No orders found.\"}):/*#__PURE__*/_jsx(\"div\",{children:orders.map(order=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-row border p-4 mb-4\",children:[/*#__PURE__*/_jsx(\"img\",{src:order.image,alt:order.productName,className:\"w-24 h-24 md:mr-4\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-grow md:ml-4\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"font-semibold\",children:[\"Product Name: \",order.productName]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Order Details: \",order.orderDetails]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Quantity: \",order.quantity]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Total Price: \\u20B9\",order.totalPrice]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Status: \",order.status]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Date: \",new Date(order.localdate).toLocaleDateString()]}),reviewInputVisible&&reviewOrderId===order.orderId?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Add your review\",value:reviewContent,onChange:e=>setReviewContent(e.target.value),className:\"border p-2 mt-2 w-full\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2 mt-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleSaveReview,className:\"bg-blue-500 text-white px-4 py-2 rounded\",children:\"Save Review\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setReviewInputVisible(false),className:\"bg-gray-500 text-white px-4 py-2 rounded\",children:\"Cancel\"})]})]}):/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleAddReview(order.orderId,order.productId),className:\"bg-blue-500 text-white px-4 py-2 rounded mt-2\",children:\"Add Review\"})]})]},order.orderId))})]});};export default Orders;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","Orders","_ref","userId","orders","setOrders","loading","setLoading","reviewInputVisible","setReviewInputVisible","reviewOrderId","setReviewOrderId","reviewContent","setReviewContent","reviewProductId","setReviewProductId","fetchOrders","response","get","data","error","console","handleAddReview","orderId","productId","handleSaveReview","payload","content","log","post","children","className","length","map","order","src","image","alt","productName","orderDetails","quantity","totalPrice","status","Date","localdate","toLocaleDateString","placeholder","value","onChange","e","target","onClick"],"sources":["E:/downloads/shopping-app/shopping-app/src/components/Order/Orders.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst Orders = ({ userId }) => {\r\n  const [orders, setOrders] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [reviewInputVisible, setReviewInputVisible] = useState(false);\r\n  const [reviewOrderId, setReviewOrderId] = useState(null);\r\n  const [reviewContent, setReviewContent] = useState('');\r\n  const [reviewProductId, setReviewProductId] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const fetchOrders = async () => {\r\n      try {\r\n        const response = await axios.get(`http://localhost:8082/orders/getByUserId/${userId}`);\r\n        setOrders(response.data);\r\n      } catch (error) {\r\n        console.error('Error fetching orders:', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchOrders();\r\n  }, [userId]);\r\n\r\n  const handleAddReview = (orderId, productId) => {\r\n    setReviewInputVisible(true);\r\n    setReviewOrderId(orderId);\r\n    setReviewProductId(productId);\r\n  };\r\n\r\n  const handleSaveReview = async () => {\r\n    try {\r\n      const payload = {\r\n        content: reviewContent,\r\n      };\r\n\r\n      console.log(\"pid= \",reviewProductId)\r\n      const response = await axios.post(`http://localhost:8083/reviews/add/${userId}/${reviewOrderId}/${reviewProductId}`, payload);\r\n\r\n      console.log('Review saved successfully:', response.data);\r\n      setReviewInputVisible(false);\r\n      setReviewContent('');\r\n    } catch (error) {\r\n      console.error('Error saving review:', error);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return <div>Loading...</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"container mx-auto\">\r\n      <h2 className=\"text-2xl font-bold mb-4\">Order Details</h2>\r\n      {orders.length === 0 ? (\r\n        <p>No orders found.</p>\r\n      ) : (\r\n        <div>\r\n          {orders.map((order) => (\r\n            <div key={order.orderId} className=\"flex flex-col md:flex-row border p-4 mb-4\">\r\n              <img src={order.image} alt={order.productName} className=\"w-24 h-24 md:mr-4\" />\r\n              <div className=\"flex flex-col md:flex-grow md:ml-4\">\r\n                <p className=\"font-semibold\">Product Name: {order.productName}</p>\r\n                <p>Order Details: {order.orderDetails}</p>\r\n                <p>Quantity: {order.quantity}</p>\r\n                <p>Total Price: â‚¹{order.totalPrice}</p>\r\n                <p>Status: {order.status}</p>\r\n                <p>Date: {new Date(order.localdate).toLocaleDateString()}</p>\r\n                {reviewInputVisible && reviewOrderId === order.orderId ? (\r\n                  <div>\r\n                    <textarea\r\n                      placeholder=\"Add your review\"\r\n                      value={reviewContent}\r\n                      onChange={(e) => setReviewContent(e.target.value)}\r\n                      className=\"border p-2 mt-2 w-full\"\r\n                    />\r\n                    <div className=\"flex space-x-2 mt-2\">\r\n                      <button onClick={handleSaveReview} className=\"bg-blue-500 text-white px-4 py-2 rounded\">\r\n                        Save Review\r\n                      </button>\r\n                      <button onClick={() => setReviewInputVisible(false)} className=\"bg-gray-500 text-white px-4 py-2 rounded\">\r\n                        Cancel\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                ) : (\r\n                  <button onClick={() => handleAddReview(order.orderId, order.productId)} className=\"bg-blue-500 text-white px-4 py-2 rounded mt-2\">\r\n                    Add Review\r\n                  </button>\r\n                )}\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Orders;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE1B,KAAM,CAAAC,MAAM,CAAGC,IAAA,EAAgB,IAAf,CAAEC,MAAO,CAAC,CAAAD,IAAA,CACxB,KAAM,CAACE,MAAM,CAAEC,SAAS,CAAC,CAAGX,QAAQ,CAAC,EAAE,CAAC,CACxC,KAAM,CAACY,OAAO,CAAEC,UAAU,CAAC,CAAGb,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACc,kBAAkB,CAAEC,qBAAqB,CAAC,CAAGf,QAAQ,CAAC,KAAK,CAAC,CACnE,KAAM,CAACgB,aAAa,CAAEC,gBAAgB,CAAC,CAAGjB,QAAQ,CAAC,IAAI,CAAC,CACxD,KAAM,CAACkB,aAAa,CAAEC,gBAAgB,CAAC,CAAGnB,QAAQ,CAAC,EAAE,CAAC,CACtD,KAAM,CAACoB,eAAe,CAAEC,kBAAkB,CAAC,CAAGrB,QAAQ,CAAC,IAAI,CAAC,CAE5DC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAqB,WAAW,CAAG,KAAAA,CAAA,GAAY,CAC9B,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAArB,KAAK,CAACsB,GAAG,CAAC,4CAA4Cf,MAAM,EAAE,CAAC,CACtFE,SAAS,CAACY,QAAQ,CAACE,IAAI,CAAC,CAC1B,CAAE,MAAOC,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,wBAAwB,CAAEA,KAAK,CAAC,CAChD,CAAC,OAAS,CACRb,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAEDS,WAAW,CAAC,CAAC,CACf,CAAC,CAAE,CAACb,MAAM,CAAC,CAAC,CAEZ,KAAM,CAAAmB,eAAe,CAAGA,CAACC,OAAO,CAAEC,SAAS,GAAK,CAC9Cf,qBAAqB,CAAC,IAAI,CAAC,CAC3BE,gBAAgB,CAACY,OAAO,CAAC,CACzBR,kBAAkB,CAACS,SAAS,CAAC,CAC/B,CAAC,CAED,KAAM,CAAAC,gBAAgB,CAAG,KAAAA,CAAA,GAAY,CACnC,GAAI,CACF,KAAM,CAAAC,OAAO,CAAG,CACdC,OAAO,CAAEf,aACX,CAAC,CAEDS,OAAO,CAACO,GAAG,CAAC,OAAO,CAACd,eAAe,CAAC,CACpC,KAAM,CAAAG,QAAQ,CAAG,KAAM,CAAArB,KAAK,CAACiC,IAAI,CAAC,qCAAqC1B,MAAM,IAAIO,aAAa,IAAII,eAAe,EAAE,CAAEY,OAAO,CAAC,CAE7HL,OAAO,CAACO,GAAG,CAAC,4BAA4B,CAAEX,QAAQ,CAACE,IAAI,CAAC,CACxDV,qBAAqB,CAAC,KAAK,CAAC,CAC5BI,gBAAgB,CAAC,EAAE,CAAC,CACtB,CAAE,MAAOO,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,sBAAsB,CAAEA,KAAK,CAAC,CAC9C,CACF,CAAC,CAED,GAAId,OAAO,CAAE,CACX,mBAAOR,IAAA,QAAAgC,QAAA,CAAK,YAAU,CAAK,CAAC,CAC9B,CAEA,mBACE9B,KAAA,QAAK+B,SAAS,CAAC,mBAAmB,CAAAD,QAAA,eAChChC,IAAA,OAAIiC,SAAS,CAAC,yBAAyB,CAAAD,QAAA,CAAC,eAAa,CAAI,CAAC,CACzD1B,MAAM,CAAC4B,MAAM,GAAK,CAAC,cAClBlC,IAAA,MAAAgC,QAAA,CAAG,kBAAgB,CAAG,CAAC,cAEvBhC,IAAA,QAAAgC,QAAA,CACG1B,MAAM,CAAC6B,GAAG,CAAEC,KAAK,eAChBlC,KAAA,QAAyB+B,SAAS,CAAC,2CAA2C,CAAAD,QAAA,eAC5EhC,IAAA,QAAKqC,GAAG,CAAED,KAAK,CAACE,KAAM,CAACC,GAAG,CAAEH,KAAK,CAACI,WAAY,CAACP,SAAS,CAAC,mBAAmB,CAAE,CAAC,cAC/E/B,KAAA,QAAK+B,SAAS,CAAC,oCAAoC,CAAAD,QAAA,eACjD9B,KAAA,MAAG+B,SAAS,CAAC,eAAe,CAAAD,QAAA,EAAC,gBAAc,CAACI,KAAK,CAACI,WAAW,EAAI,CAAC,cAClEtC,KAAA,MAAA8B,QAAA,EAAG,iBAAe,CAACI,KAAK,CAACK,YAAY,EAAI,CAAC,cAC1CvC,KAAA,MAAA8B,QAAA,EAAG,YAAU,CAACI,KAAK,CAACM,QAAQ,EAAI,CAAC,cACjCxC,KAAA,MAAA8B,QAAA,EAAG,qBAAc,CAACI,KAAK,CAACO,UAAU,EAAI,CAAC,cACvCzC,KAAA,MAAA8B,QAAA,EAAG,UAAQ,CAACI,KAAK,CAACQ,MAAM,EAAI,CAAC,cAC7B1C,KAAA,MAAA8B,QAAA,EAAG,QAAM,CAAC,GAAI,CAAAa,IAAI,CAACT,KAAK,CAACU,SAAS,CAAC,CAACC,kBAAkB,CAAC,CAAC,EAAI,CAAC,CAC5DrC,kBAAkB,EAAIE,aAAa,GAAKwB,KAAK,CAACX,OAAO,cACpDvB,KAAA,QAAA8B,QAAA,eACEhC,IAAA,aACEgD,WAAW,CAAC,iBAAiB,CAC7BC,KAAK,CAAEnC,aAAc,CACrBoC,QAAQ,CAAGC,CAAC,EAAKpC,gBAAgB,CAACoC,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CAClDhB,SAAS,CAAC,wBAAwB,CACnC,CAAC,cACF/B,KAAA,QAAK+B,SAAS,CAAC,qBAAqB,CAAAD,QAAA,eAClChC,IAAA,WAAQqD,OAAO,CAAE1B,gBAAiB,CAACM,SAAS,CAAC,0CAA0C,CAAAD,QAAA,CAAC,aAExF,CAAQ,CAAC,cACThC,IAAA,WAAQqD,OAAO,CAAEA,CAAA,GAAM1C,qBAAqB,CAAC,KAAK,CAAE,CAACsB,SAAS,CAAC,0CAA0C,CAAAD,QAAA,CAAC,QAE1G,CAAQ,CAAC,EACN,CAAC,EACH,CAAC,cAENhC,IAAA,WAAQqD,OAAO,CAAEA,CAAA,GAAM7B,eAAe,CAACY,KAAK,CAACX,OAAO,CAAEW,KAAK,CAACV,SAAS,CAAE,CAACO,SAAS,CAAC,+CAA+C,CAAAD,QAAA,CAAC,YAElI,CAAQ,CACT,EACE,CAAC,GA/BEI,KAAK,CAACX,OAgCX,CACN,CAAC,CACC,CACN,EACE,CAAC,CAEV,CAAC,CAED,cAAe,CAAAtB,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}