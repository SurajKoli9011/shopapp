{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import Carousel from'react-multi-carousel';import'react-multi-carousel/lib/styles.css';import axios from'axios';import ProductDetailsComponent from'../ProductDetailsComponent/ProductDetailsComponent';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const HomePage=_ref=>{let{userEmail,updateCartCount,updateUserId}=_ref;const[watches,setWatches]=useState([]);const[clothing,setClothing]=useState([]);const[shoes,setShoes]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[userId,setUserId]=useState(null);const navigate=useNavigate();useEffect(()=>{const fetchData=async()=>{try{if(userEmail){const userResponse=await axios.get(`http://localhost:8095/auth/getByEmail?email=${userEmail}`);const fetchedUserId=userResponse.data.id;setUserId(fetchedUserId);updateUserId(fetchedUserId);}const[watchesResponse,clothingResponse,shoesResponse]=await Promise.all([axios.get('http://localhost:8098/products/getAllWatches'),axios.get('http://localhost:8098/products/getAllClothing'),axios.get('http://localhost:8098/products/getAllShoes')]);setWatches(watchesResponse.data);setClothing(clothingResponse.data);setShoes(shoesResponse.data);setLoading(false);}catch(error){setError(error.message);setLoading(false);}};fetchData();},[userEmail,updateUserId]);const handleBuyNow=async product=>{try{if(!userEmail){navigate('/login');}else{const response=await axios.post(`http://localhost:8082/orders/create/${userId}/${product.pid}`);console.log(\"Order created successfully\");alert(\"Order placed Successfully\");navigate('/orders');}}catch(error){console.error(\"Error placing order:\",error);}};const handleAddToCart=async product=>{try{if(!userEmail){navigate('/login');return;}if(!userId){console.error('User ID is not available yet.');return;}await axios.put(`http://localhost:8010/cart/add/${userId}/${product.pid}`);updateCartCount(prevCount=>prevCount+1);}catch(error){console.error('Failed to add to cart:',error.message);}};const handleProductClick=product=>{navigate('/productDetails',{state:{product}});};const responsive={superLargeDesktop:{breakpoint:{max:4000,min:3000},items:5},desktop:{breakpoint:{max:3000,min:1024},items:3},tablet:{breakpoint:{max:1024,min:464},items:2},mobile:{breakpoint:{max:464,min:0},items:1}};if(loading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}if(error){return/*#__PURE__*/_jsxs(\"div\",{children:[\"Error: \",error]});}const renderProducts=products=>/*#__PURE__*/_jsx(Carousel,{responsive:responsive,className:\"mb-8\",children:products.map(product=>/*#__PURE__*/_jsx(\"div\",{className:\"p-2 relative\",onClick:()=>handleProductClick(product),children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-xs rounded overflow-hidden shadow-lg bg-white mx-auto transform transition-transform duration-300 hover:scale-105\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-full h-48\",children:/*#__PURE__*/_jsx(\"img\",{className:\"w-full h-full object-contain\",src:product.image,alt:product.name})}),/*#__PURE__*/_jsxs(\"div\",{className:\"px-4 py-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-bold text-lg mb-2\",children:product.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-700 text-sm\",children:product.description}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-700 text-base\",children:[\"$\",product.price]}),/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.stopPropagation();handleAddToCart(product);},className:\"bg-blue-500 text-white text-sm py-1 px-2 rounded-md hover:bg-blue-700 mt-2\",children:\"Add to Cart\"}),/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.stopPropagation();handleBuyNow(product);},className:\"bg-green-500 text-white text-sm py-1 px-2 rounded-md hover:bg-green-700 mt-2 ml-2\",children:\"Buy Now\"})]})]})},product.pid))});return/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto py-8\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold mb-4\",children:\"Watches\"}),renderProducts(watches),/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold mb-4\",children:\"Clothing\"}),renderProducts(clothing),/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold mb-4\",children:\"Shoes\"}),renderProducts(shoes)]});};export default HomePage;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","Carousel","axios","ProductDetailsComponent","jsx","_jsx","jsxs","_jsxs","HomePage","_ref","userEmail","updateCartCount","updateUserId","watches","setWatches","clothing","setClothing","shoes","setShoes","loading","setLoading","error","setError","userId","setUserId","navigate","fetchData","userResponse","get","fetchedUserId","data","id","watchesResponse","clothingResponse","shoesResponse","Promise","all","message","handleBuyNow","product","response","post","pid","console","log","alert","handleAddToCart","put","prevCount","handleProductClick","state","responsive","superLargeDesktop","breakpoint","max","min","items","desktop","tablet","mobile","children","renderProducts","products","className","map","onClick","src","image","alt","name","description","price","e","stopPropagation"],"sources":["E:/downloads/shopping-app/shopping-app/src/components/HomePage/HomePage.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport Carousel from 'react-multi-carousel';\r\nimport 'react-multi-carousel/lib/styles.css';\r\nimport axios from 'axios';\r\nimport ProductDetailsComponent from '../ProductDetailsComponent/ProductDetailsComponent';\r\n\r\nconst HomePage = ({ userEmail, updateCartCount, updateUserId }) => {\r\n  const [watches, setWatches] = useState([]);\r\n  const [clothing, setClothing] = useState([]);\r\n  const [shoes, setShoes] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [userId, setUserId] = useState(null);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        if (userEmail) {\r\n          const userResponse = await axios.get(`http://localhost:8095/auth/getByEmail?email=${userEmail}`);\r\n          const fetchedUserId = userResponse.data.id;\r\n          setUserId(fetchedUserId);\r\n          updateUserId(fetchedUserId);\r\n        }\r\n\r\n        const [watchesResponse, clothingResponse, shoesResponse] = await Promise.all([\r\n          axios.get('http://localhost:8098/products/getAllWatches'),\r\n          axios.get('http://localhost:8098/products/getAllClothing'),\r\n          axios.get('http://localhost:8098/products/getAllShoes')\r\n        ]);\r\n\r\n        setWatches(watchesResponse.data);\r\n        setClothing(clothingResponse.data);\r\n        setShoes(shoesResponse.data);\r\n        setLoading(false);\r\n      } catch (error) {\r\n        setError(error.message);\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, [userEmail, updateUserId]);\r\n\r\n  const handleBuyNow = async (product) => {\r\n    try {\r\n      if (!userEmail) {\r\n        navigate('/login');\r\n      } else {\r\n        const response = await axios.post(`http://localhost:8082/orders/create/${userId}/${product.pid}`);\r\n        console.log(\"Order created successfully\");\r\n        alert(\"Order placed Successfully\");\r\n        navigate('/orders');\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error placing order:\", error);\r\n    }\r\n  };\r\n\r\n  const handleAddToCart = async (product) => {\r\n    try {\r\n      if (!userEmail) {\r\n        navigate('/login');\r\n        return;\r\n      }\r\n      if (!userId) {\r\n        console.error('User ID is not available yet.');\r\n        return;\r\n      }\r\n\r\n      await axios.put(`http://localhost:8010/cart/add/${userId}/${product.pid}`);\r\n      updateCartCount((prevCount) => prevCount + 1);\r\n    } catch (error) {\r\n      console.error('Failed to add to cart:', error.message);\r\n    }\r\n  };\r\n\r\n  const handleProductClick = (product) => {\r\n    navigate('/productDetails', { state: { product } });\r\n  };\r\n\r\n  const responsive = {\r\n    superLargeDesktop: { breakpoint: { max: 4000, min: 3000 }, items: 5 },\r\n    desktop: { breakpoint: { max: 3000, min: 1024 }, items: 3 },\r\n    tablet: { breakpoint: { max: 1024, min: 464 }, items: 2 },\r\n    mobile: { breakpoint: { max: 464, min: 0 }, items: 1 }\r\n  };\r\n\r\n  if (loading) {\r\n    return <div>Loading...</div>;\r\n  }\r\n\r\n  if (error) {\r\n    return <div>Error: {error}</div>;\r\n  }\r\n\r\n  const renderProducts = (products) => (\r\n    <Carousel responsive={responsive} className=\"mb-8\">\r\n      {products.map(product => (\r\n        <div key={product.pid} className=\"p-2 relative\" onClick={() => handleProductClick(product)}>\r\n          <div className=\"max-w-xs rounded overflow-hidden shadow-lg bg-white mx-auto transform transition-transform duration-300 hover:scale-105\">\r\n            <div className=\"w-full h-48\">\r\n              <img className=\"w-full h-full object-contain\" src={product.image} alt={product.name} />\r\n            </div>\r\n            <div className=\"px-4 py-2\">\r\n              <div className=\"font-bold text-lg mb-2\">{product.name}</div>\r\n              <p className=\"text-gray-700 text-sm\">{product.description}</p>\r\n              <p className=\"text-gray-700 text-base\">${product.price}</p>\r\n              <button\r\n                onClick={(e) => { e.stopPropagation(); handleAddToCart(product); }}\r\n                className=\"bg-blue-500 text-white text-sm py-1 px-2 rounded-md hover:bg-blue-700 mt-2\"\r\n              >\r\n                Add to Cart\r\n              </button>\r\n              <button\r\n                onClick={(e) => { e.stopPropagation(); handleBuyNow(product); }}\r\n                className=\"bg-green-500 text-white text-sm py-1 px-2 rounded-md hover:bg-green-700 mt-2 ml-2\"\r\n              >\r\n                Buy Now\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      ))}\r\n    </Carousel>\r\n  );\r\n\r\n  return (\r\n    <div className=\"container mx-auto py-8\">\r\n      <h2 className=\"text-2xl font-bold mb-4\">Watches</h2>\r\n      {renderProducts(watches)}\r\n      <h2 className=\"text-2xl font-bold mb-4\">Clothing</h2>\r\n      {renderProducts(clothing)}\r\n      <h2 className=\"text-2xl font-bold mb-4\">Shoes</h2>\r\n      {renderProducts(shoes)}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HomePage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}